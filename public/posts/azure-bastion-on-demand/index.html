<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Azure Bastion on Demand | ringoc&#39;s blog</title>
  <link rel = 'canonical' href = 'https://www.ringoc.com/posts/azure-bastion-on-demand/'>
  <meta name="description" content="I am a software engineer focus on DevOps and cloud-native technology. Most of my work is open source and publicly available on GitHub. You can follow me on Twitter where I mostly tweet about my projects and DevOps technologies.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Azure Bastion on Demand" />
<meta property="og:description" content="A smart and cost effective way to use Azure Bastion" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.ringoc.com/posts/azure-bastion-on-demand/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-09T23:30:35+10:00" />
<meta property="article:modified_time" content="2021-07-09T23:30:35+10:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Azure Bastion on Demand"/>
<meta name="twitter:description" content="A smart and cost effective way to use Azure Bastion"/>

  
  
    
  
  
  <link rel="stylesheet" href="https://www.ringoc.com/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css" integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://www.ringoc.com/images/favicon.ico" />

  
  
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Blogs</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://www.ringoc.com/posts/terraform-with-remote-tfe-backend-in-azure-devops-pipeline/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://www.ringoc.com/posts/enable-redhat-golden-image-byos-azure/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&text=Azure%20Bastion%20on%20Demand" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&title=Azure%20Bastion%20on%20Demand" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&is_video=false&description=Azure%20Bastion%20on%20Demand" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Azure%20Bastion%20on%20Demand&body=Check out this article: https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&title=Azure%20Bastion%20on%20Demand" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&title=Azure%20Bastion%20on%20Demand" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&name=Azure%20Bastion%20on%20Demand&description=A%20smart%20and%20cost%20effective%20way%20to%20use%20Azure%20Bastion" aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&t=Azure%20Bastion%20on%20Demand" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#background">Background</a></li>
    <li><a href="#what-is-azure-bastion-">What is Azure Bastion ?</a></li>
  </ul>

  <ul>
    <li><a href="#solution">Solution</a>
      <ul>
        <li><a href="#create-login-app-for-createbastionbyemail">Create Login App for <code>createBastionByEmail</code></a></li>
        <li><a href="#2-create-login-app-for-deletebastionbyschedule">2. Create Login App for <code>deleteBastionBySchedule</code></a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Azure Bastion on Demand
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2021-07-09 23:30:35 &#43;1000 AEST" itemprop="datePublished">2021-07-09</time>
          
        </div>
        
        
        
        <div class="article-category">
            <i class="fas fa-archive"></i>
            
            
            <a class="category-link" href="/categories/cloud">cloud</a>
            
        </div>
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/azure" rel="tag">azure</a>
            
             ,  
            <a class="tag-link" href="/tags/bastion" rel="tag">bastion</a>
            
             ,  
            <a class="tag-link" href="/tags/logicapp" rel="tag">logicapp</a>
            
             ,  
            <a class="tag-link" href="/tags/severless" rel="tag">severless</a>
            
             ,  
            <a class="tag-link" href="/tags/cloud" rel="tag">cloud</a>
            
        </div>
        
      </div>
    </header>

  
    <div class="article-gallery">
      
      <a class="gallery-item" href="/posts/azure-bastion-on-demand/azure-bastion-pricing.png" rel="gallery_0">
          <img src="/posts/azure-bastion-on-demand/azure-bastion-pricing.png" itemprop="image" />
      </a>
      
      <a class="gallery-item" href="/posts/azure-bastion-on-demand/create-bastion-by-email-email.png" rel="gallery_1">
          <img src="/posts/azure-bastion-on-demand/create-bastion-by-email-email.png" itemprop="image" />
      </a>
      
      <a class="gallery-item" href="/posts/azure-bastion-on-demand/create-bastion-by-email-http.png" rel="gallery_2">
          <img src="/posts/azure-bastion-on-demand/create-bastion-by-email-http.png" itemprop="image" />
      </a>
      
      <a class="gallery-item" href="/posts/azure-bastion-on-demand/create-bastion-by-email-output.png" rel="gallery_3">
          <img src="/posts/azure-bastion-on-demand/create-bastion-by-email-output.png" itemprop="image" />
      </a>
      
      <a class="gallery-item" href="/posts/azure-bastion-on-demand/delete-bastion-1.png" rel="gallery_4">
          <img src="/posts/azure-bastion-on-demand/delete-bastion-1.png" itemprop="image" />
      </a>
      
      <a class="gallery-item" href="/posts/azure-bastion-on-demand/delete-bastion-2.png" rel="gallery_5">
          <img src="/posts/azure-bastion-on-demand/delete-bastion-2.png" itemprop="image" />
      </a>
      
      <a class="gallery-item" href="/posts/azure-bastion-on-demand/delete-bastion-3.png" rel="gallery_6">
          <img src="/posts/azure-bastion-on-demand/delete-bastion-3.png" itemprop="image" />
      </a>
      
      <a class="gallery-item" href="/posts/azure-bastion-on-demand/delete-bastion-4.png" rel="gallery_7">
          <img src="/posts/azure-bastion-on-demand/delete-bastion-4.png" itemprop="image" />
      </a>
      
      <a class="gallery-item" href="/posts/azure-bastion-on-demand/delete-bastion-5.png" rel="gallery_8">
          <img src="/posts/azure-bastion-on-demand/delete-bastion-5.png" itemprop="image" />
      </a>
      
    </div>
  
    
    <div class="content" itemprop="articleBody">
      <h2 id="background">Background</h2>
<p>Internet opens up tons of possibility, but at the same time your properties can become vulunaerable for security breach. It is important for everyone to maintain highest level of security for their properties.</p>
<p>In the Azure cloud environment, accessing your resources e.g. VM through SSH/RDP means you have to expose your port <code>22</code> or <code>3389</code> to the internet. One of the nice way is to use Azure Bastion.</p>
<h2 id="what-is-azure-bastion-">What is Azure Bastion ?</h2>
<blockquote>
<p>Azure Bastion is a new fully platform-managed PaaS service you provision inside your virtual network. It provides secure and seamless RDP/SSH connectivity to your VMs directly in the Azure portal over SSL. When you connect via Azure Bastion, your virtual machines do not need a public IP address.</p>
</blockquote>
<h1 id="challenge">Challenge</h1>
<p>However, the cost of Azure Bastion is not cheap. It added up to near $200 Australian Dollar per months not counting the outgoing traffic.
<img src="./images/azure-bastion-pricing.png" alt="Azure Bastion Pricing"> <!-- raw HTML omitted -->
Of course one can delete the Azure Bastion at the end of the day. And keep spinning up a new one the next day. After a few times, you may feel sick of it at least for me. I need to think of a way to automcate this process.</p>
<h2 id="solution">Solution</h2>
<p>I am going to show you how to setup Azure Bastion on demand with Serverless on Azure Portal</p>
<p>Here are the steps:</p>
<h3 id="create-login-app-for-createbastionbyemail">Create Login App for <code>createBastionByEmail</code></h3>
<p><img src="./images/create-bastion-by-email-email.png" alt="Create Bastion by Email"></p>
<p><img src="./images/create-bastion-by-email-http.png" alt="Create Bastion by Email"></p>
<p><img src="./images/create-bastion-by-email-output.png" alt="Create Bastion by Email">
<a href="mailto:user@example.com">user@example.com</a></p>
<h3 id="2-create-login-app-for-deletebastionbyschedule">2. Create Login App for <code>deleteBastionBySchedule</code></h3>
<p><img src="./images/delete-bastion-1.png" alt="Create Bastion by Email">
<img src="./images/delete-bastion-2.png" alt="Create Bastion by Email">
<img src="./images/delete-bastion-3.png" alt="Create Bastion by Email">
<img src="./images/delete-bastion-4.png" alt="Create Bastion by Email">
<img src="./images/delete-bastion-5.png" alt="Create Bastion by Email"></p>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Blogs</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#background">Background</a></li>
    <li><a href="#what-is-azure-bastion-">What is Azure Bastion ?</a></li>
  </ul>

  <ul>
    <li><a href="#solution">Solution</a>
      <ul>
        <li><a href="#create-login-app-for-createbastionbyemail">Create Login App for <code>createBastionByEmail</code></a></li>
        <li><a href="#2-create-login-app-for-deletebastionbyschedule">2. Create Login App for <code>deleteBastionBySchedule</code></a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&text=Azure%20Bastion%20on%20Demand" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&title=Azure%20Bastion%20on%20Demand" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&is_video=false&description=Azure%20Bastion%20on%20Demand" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Azure%20Bastion%20on%20Demand&body=Check out this article: https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&title=Azure%20Bastion%20on%20Demand" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&title=Azure%20Bastion%20on%20Demand" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&name=Azure%20Bastion%20on%20Demand&description=A%20smart%20and%20cost%20effective%20way%20to%20use%20Azure%20Bastion" aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.ringoc.com%2fposts%2fazure-bastion-on-demand%2f&t=Azure%20Bastion%20on%20Demand" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2022  ringoc 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Blogs</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
